<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ title or "modsuav" }}</title>
    <link href="/style.css" rel="stylesheet" />
  </head>

  <body class="min-h-screen flex flex-col bg-backdrop text-whisper font-sans antialiased">

    {% include "nav.njk" %}

    <!-- ✶ DESKTOP PANEL -->
    <div id="freedomPanelDesktop"
      class="fixed top-14 left-0 w-full h-[calc(100vh-3.5rem)] bg-[#0a0a0a] border-t border-neutral-800
             text-whisper font-mono text-sm z-50 overflow-y-auto
             opacity-0 pointer-events-none transform -translate-y-2
             transition-all duration-300 ease-out">

      <div class="w-full max-w-6xl mx-auto px-6 md:px-12 py-12 flex justify-between gap-12">
        <!-- LEFT -->
        <div class="space-y-3 max-w-xl flex-1">
          <h2 class="text-xl font-bold text-suav">SUAV Console Labs</h2>
          <p class="opacity-80 leading-snug">
            Soul-coded tools for artists and studios. No roadmap. Just resonance.
          </p>
          <p class="text-xs text-neutral-500">
            Everything here hums quietly until called.
          </p>
        </div>

        <!-- RIGHT -->
        <div class="space-y-2 w-48">
          <a href="/freebies" class="block hover:text-suav transition">Freebies ✶</a>

          <button id="branchesToggleDesktop" class="block w-full text-left hover:text-suav transition flex items-center gap-1">
            Branches
            <svg id="branchesChevronDesktop" class="w-3 h-3 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>

          <div id="branchesPanelDesktop" class="hidden ml-2 mt-2 border-l border-neutral-700 space-y-2 pl-4 text-sm">
            <a href="/branches/figma-tools" class="block hover:text-suav transition">Figma Tools</a>
            <a href="/branches/webflow-ghl" class="block hover:text-suav transition">Webflow → GHL</a>
            <a href="/branches/api-access" class="block hover:text-suav transition">API Access</a>
          </div>

          <a href="/docs" class="block hover:text-suav transition">Docs</a>
        </div>
      </div>
    </div>

    <!-- ✶ MOBILE NAV OVERLAY and footer/scripts assumed below -->

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const toggleBtn = document.getElementById("freedomToggleDesktop");
        const panel = document.getElementById("freedomPanelDesktop");
        const chevron = document.getElementById("freedomChevronDesktop");

        let isOpen = false;

        toggleBtn?.addEventListener("click", (e) => {
          e.stopPropagation();
          isOpen = !isOpen;
          panel.classList.toggle("opacity-0", !isOpen);
          panel.classList.toggle("pointer-events-none", !isOpen);
          panel.classList.toggle("-translate-y-2", !isOpen);
          panel.classList.toggle("translate-y-0", isOpen);
          chevron?.classList.toggle("rotate-180", isOpen);
        });

        document.addEventListener("click", (e) => {
          if (
            isOpen &&
            !panel.contains(e.target) &&
            !toggleBtn.contains(e.target)
          ) {
            isOpen = false;
            panel.classList.add("opacity-0", "pointer-events-none", "-translate-y-2");
            panel.classList.remove("translate-y-0");
            chevron?.classList.remove("rotate-180");
          }
        });

        const branchesToggleDesktop = document.getElementById("branchesToggleDesktop");
        const branchesPanelDesktop = document.getElementById("branchesPanelDesktop");
        const branchesChevronDesktop = document.getElementById("branchesChevronDesktop");

        branchesToggleDesktop?.addEventListener("click", () => {
          const open = branchesPanelDesktop.classList.toggle("hidden");
          branchesChevronDesktop?.classList.toggle("rotate-180", open);
        });
      });
    </script>
  </body>
</html>






